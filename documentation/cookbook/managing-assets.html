<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

		<title>Managing assets</title>

		<meta name="description" content="HaxePunk is a 2d game engine written in Haxe for cross-platform deployment.">
		<meta name="author" content="HaxePunk.com">
		<meta name="HandheldFriendly" content="True">
		<meta name="MobileOptimized" content="320">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">

		<link rel="shortcut icon" type="image/png" href="/img/favicon.png">

		<link rel="stylesheet" type="text/css" href="/css/ink.css">
		<link rel="stylesheet" type="text/css" href="/css/syntax.css">
		<link rel="stylesheet" type="text/css" href="/css/custom.css">

		<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-5069201-6', 'haxepunk.com');
		ga('send', 'pageview');
		</script>
	</head>

	<body>
		<div class="top-menu">
			<a href="/" class="logo">
				<image src="/img/HaxePunk.svg" width="512" height="128" alt="HaxePunk" />
			</a>
			<nav class="ink-navigation">
				<ul class="menu horizontal orange">
					<li class="">
						<a href="/">Home</a>
					</li>
					<li class="">
						<a href="/features/">Features</a>
					</li>
					<li class="">
						<a href="/demos/">Demos</a>
					</li>
					<li class="active">
						<a href="/documentation/">Documentation</a>
					</li>
					<li class="">
						<a href="/games/">Games</a>
					</li>
					<li>
						<a href="http://forum.haxepunk.com/category/1/blog">Blog</a>
					</li>
					<li>
						<a href="http://forum.haxepunk.com/">Forum</a>
					</li>
				</ul>
			</nav>
		</div>

		<div class="github">
			<a href="https://github.com/HaxePunk/HaxePunk">Fork me on GitHub</a>
		</div>

<div class="ink-grid vspace mainpoints">
	<div class="column-group">
		<div class="hide-small medium-10 large-15"></div>
		<div class="small-100 medium-80 large-70">
			<h1>Managing assets</h1>
			<h4>Since v4.0.0 by bendmorris</h4>
			<p>HaxePunk provides some simple abstractions over the underlying framework&#39;s asset loading system.</p>

<h2>AssetLoader</h2>

<p>To load a new version of an asset by name, use <code>AssetLoader</code>:</p>
<div class="highlight"><pre><code class="language-haxe" data-lang="haxe"><span class="kd">var</span> logo <span class="o">=</span> <span class="n">AssetLoader</span><span class="p">.</span><span class="n">getTexture</span><span class="p">(</span><span class="s2">&quot;graphics/logo.png&quot;</span><span class="p">);</span>
</code></pre></div>
<p>AssetLoader will always re-load an asset from scratch; it will bypass any caching.</p>

<p>(<a href="/documentation/api/haxepunk/assets/AssetLoader.html">API docs</a>)</p>

<h2>AssetCache</h2>

<p><code>AssetCache</code> gives you control over how long your assets are cached in memory and when they&#39;re disposed.</p>

<p>If you&#39;re making a simple game you may not be worried about memory use; in that case, you can use String asset names and they&#39;ll be loaded into the global cache automatically:</p>
<div class="highlight"><pre><code class="language-haxe" data-lang="haxe"><span class="kd">var</span> img <span class="o">=</span> <span class="k">new</span> <span class="n">Image</span><span class="p">(</span><span class="s2">&quot;graphics/img.png&quot;</span><span class="p">);</span>
</code></pre></div>
<p>Each Scene also has its own AssetCache instance which will be destroyed when the Scene is removed from the stack, freeing any memory it had allocated. You can pre-cache assets in the Scene AssetCache when the Scene begins:</p>
<div class="highlight"><pre><code class="language-haxe" data-lang="haxe"><span class="kd">class</span> <span class="n">MyScene</span> <span class="kd">extends</span> <span class="n">Scene</span>
<span class="p">{</span>
    <span class="kd">override</span> <span class="kd">public</span> <span class="kd">function</span> <span class="nf">begin</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// load this texture into memory for the duration of this Scene</span>
        <span class="n">assetCache</span><span class="p">.</span><span class="n">getTexture</span><span class="p">(</span><span class="s2">&quot;graphics/img.png&quot;</span><span class="p">);</span>

        <span class="c1">// use the cached version</span>
        <span class="kd">var</span> img <span class="o">=</span> <span class="k">new</span> <span class="n">Image</span><span class="p">(</span><span class="s2">&quot;graphics/img.png&quot;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>You can also create your own AssetCache instances and call their <code>enable</code> method for fine-grained control over the lifetime of your assets.</p>

<p>The AssetCache <code>get</code> methods (<code>getTexture</code>, <code>getSound</code>...) will return an asset from the cache if it has already been loaded. If not, it will use AssetLoader to load it, then store it in the cache and return it. If additional AssetCaches try to get the same asset before it has been disposed, it will add additional references in the other caches; the references won&#39;t use additional memory, but they will prevent the asset from being disposed until it is removed from every cache.</p>

<p>To load assets and make sure they&#39;re always cached, load them into the global AssetCache instance:</p>
<div class="highlight"><pre><code class="language-haxe" data-lang="haxe"><span class="n">AssetCache</span><span class="p">.</span><span class="n">global</span><span class="p">.</span><span class="n">getTexture</span><span class="p">(</span><span class="s2">&quot;graphics/img.png&quot;</span><span class="p">);</span>
</code></pre></div>
<p>(<a href="/documentation/api/haxepunk/assets/AssetCache.html">API docs</a>)</p>


			<h2>Cookbook</h2>
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
				<li><a href="/documentation/cookbook/drawing-multiple-scenes.html">Drawing multiple scenes</a></li>
				
			
				
			
				
				<li><a href="/documentation/cookbook/emitter-backward-animation.html">Emitter backward animation</a></li>
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
				<li><a href="/documentation/cookbook/haxedefs.html">Haxedef flags</a></li>
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
				<li><a href="/documentation/cookbook/multi-platform-input.html">Multi-platform input</a></li>
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
				<li><a href="/documentation/cookbook/tileset-spacing.html">Tileset spacing</a></li>
				
			
				
			
				
			
				
			
		</div>
	</div>
</div>


		<footer>
		<div class="ink-grid">
			<div class="large-100 medium-100 small-100">
				<strong>HaxePunk</strong> is an open source, cross-platform game engine for the <a href="http://haxe.org">Haxe programming language</a>.
			</div>
			<div class="large-100 medium-100 small-100">
				Copyright &copy; 2011-2018 HaxePunk.com
				&bull;
				HaxePunk's <a href="https://github.com/HaxePunk">code</a> is licensed under
				<a href="http://opensource.org/licenses/MIT">MIT</a>
				&bull;
				Follow <a href="https://twitter.com/HaxePunk">@HaxePunk</a>
				&bull;
				<a href="https://github.com/HaxePunk/haxepunk.com">Site</a> made with <a href="http://ink.sapo.pt/">Ink</a>
				Powered by <a href="http://pages.github.com/">GitHub Pages</a>
			</div>
		</div>
		</footer>

		<script type="text/javascript" src="/js/holder.js"></script>
		<script type="text/javascript" src="/js/ink-all.min.js"></script>
		<script type="text/javascript" src="/js/autoload.js"></script>
		<script type="text/javascript" src="/js/html5shiv.js"></script>
	</body>

</html>
